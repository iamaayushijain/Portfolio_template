{"version":3,"file":"index.js","sources":["../../../../components/StarRating/index.tsx"],"sourcesContent":["import React from 'react';\nimport clamp from 'lodash/clamp';\nimport times from 'lodash/times';\nimport noop from 'lodash/noop';\nimport classNames from 'classnames';\nimport styles from './index.module.scss';\n\n// Total number of stars\nconst MAX_NUM_STARS = 5;\n\n// Smallest increment we render\nconst PRECISION = 0.5;\n\nexport interface StarRatingProps {\n    /**\n     * Number from 0-5 at increments of 0.5. Numbers between these steps will be rounded.\n     */\n    rating: number;\n    /**\n     * Number from 0-5 at increments of 1. `hoverRating` trumps `rating` with respect to star\n     * highlighting.\n     */\n    hoverRating?: 0 | 1 | 2 | 3 | 4 | 5;\n    /**\n     * The size of the component when rendered\n     */\n    size?: 'small' | 'medium' | 'large';\n    /**\n     * Function that is called when a user clicks on a star. The function is supplied a single\n     * parameter?: the value of the clicked star.\n     */\n    onStarClick?: (value: number) => void;\n    /**\n     * Function that is called when a user hovers over a star. The function is supplied a single\n     * parameter?: the value of the hovered star.\n     */\n    onStarHover?: (value: number) => void;\n    /**\n     * Function that is called when a user mouses away from the `StarRating` component\n     */\n    onMouseLeave?: () => void;\n}\n\nexport default function StarRating({\n    rating,\n    hoverRating = 0,\n    size = 'small',\n    onStarClick = noop,\n    onStarHover = noop,\n    onMouseLeave = noop,\n}: StarRatingProps): JSX.Element {\n    // Determine if instance is interactive.\n    const isInteractive = onStarClick !== noop || onStarHover !== noop;\n\n    // Limit rating to between 0 and MAX_NUM_STARS\n    const clampedRating = clamp(rating, 0, MAX_NUM_STARS);\n\n    // Round rating to PRECISION (e.g, 2.7 --> 2.5).\n    const roundedRating = Math.round(clampedRating / PRECISION) * PRECISION;\n\n    // Use hoverRating when present, otherwise use rating\n    const ratingValue = hoverRating || roundedRating;\n\n    // aria-label text\n    const ariaStarText = ratingValue === 1 ? 'star' : 'stars';\n    const ariaLabel = `${ratingValue} ${ariaStarText} out of ${MAX_NUM_STARS} star rating`;\n\n    return (\n        <div\n            className={classNames(styles.root, {\n                [styles.small]: size === 'small',\n                [styles.large]: size === 'large',\n                [styles.medium]: size === 'medium',\n            })}\n            data-star={ratingValue}\n            aria-label={ariaLabel}\n            onMouseLeave={onMouseLeave}\n            role={isInteractive ? undefined : 'img'}\n        >\n            {isInteractive && (\n                <div className={styles.rateInputsWrap}>\n                    {times(MAX_NUM_STARS, index => (\n                        // eslint-disable-next-line jsx-a11y/label-has-for, jsx-a11y/label-has-associated-control\n                        <label\n                            className={styles.rateLabel}\n                            key={index}\n                            onMouseEnter={(): void => onStarHover(index + 1)}\n                        >\n                            <input\n                                className={styles.rateInput}\n                                type=\"radio\"\n                                name=\"rating\"\n                                value={index + 1}\n                                onClick={(): void => onStarClick(index + 1)}\n                            />\n                            {index === 0 ? '1 star' : `${index + 1} stars`}\n                        </label>\n                    ))}\n                </div>\n            )}\n        </div>\n    );\n}\n"],"names":["MAX_NUM_STARS","PRECISION","StarRating","rating","hoverRating","size","onStarClick","noop","onStarHover","onMouseLeave","isInteractive","clampedRating","clamp","roundedRating","Math","round","ratingValue","ariaStarText","ariaLabel","React","classNames","styles","root","small","large","medium","undefined","rateInputsWrap","times","index","rateLabel","rateInput"],"mappings":";;;;;;;;;;;;;AAQA,IAAMA,aAAa,GAAG,CAAtB;;AAGA,IAAMC,SAAS,GAAG,GAAlB;AAgCA,SAAwBC;;;MACpBC,cAAAA;8BACAC;MAAAA,4CAAc;uBACdC;MAAAA,8BAAO;8BACPC;MAAAA,4CAAcC;8BACdC;MAAAA,4CAAcD;+BACdE;MAAAA,8CAAeF;;MAGTG,aAAa,GAAGJ,WAAW,KAAKC,IAAhB,IAAwBC,WAAW,KAAKD,IAA9D;;MAGMI,aAAa,GAAGC,KAAK,CAACT,MAAD,EAAS,CAAT,EAAYH,aAAZ,CAA3B;;MAGMa,aAAa,GAAGC,IAAI,CAACC,KAAL,CAAWJ,aAAa,GAAGV,SAA3B,IAAwCA,SAA9D;;MAGMe,WAAW,GAAGZ,WAAW,IAAIS,aAAnC;;MAGMI,YAAY,GAAGD,WAAW,KAAK,CAAhB,GAAoB,MAApB,GAA6B,OAAlD;MACME,SAAS,aAAMF,WAAN,cAAqBC,YAArB,qBAA4CjB,aAA5C,iBAAf;SAGImB;IACI,SAAS,EAAEC,UAAU,CAACC,MAAM,CAACC,IAAR,2EAChBD,MAAM,CAACE,KADS,EACDlB,IAAI,KAAK,OADR,yDAEhBgB,MAAM,CAACG,KAFS,EAEDnB,IAAI,KAAK,OAFR,yDAGhBgB,MAAM,CAACI,MAHS,EAGApB,IAAI,KAAK,QAHT,gBADzB;iBAMeW,WANf;kBAOgBE,SAPhB;IAQI,YAAY,EAAET,YARlB;IASI,IAAI,EAAEC,aAAa,GAAGgB,SAAH,GAAe;KAEjChB,aAAa,IACVS;IAAK,SAAS,EAAEE,MAAM,CAACM;KAClBC,KAAK,CAAC5B,aAAD,EAAgB,UAAA6B,KAAK;;;QAGnB,SAAS,EAAER,MAAM,CAACS,SADtB;QAEI,GAAG,EAAED,KAFT;QAGI,YAAY,EAAE;iBAAYrB,WAAW,CAACqB,KAAK,GAAG,CAAT,CAAvB;;SAEdV;QACI,SAAS,EAAEE,MAAM,CAACU,SADtB;QAEI,IAAI,EAAC,OAFT;QAGI,IAAI,EAAC,QAHT;QAII,KAAK,EAAEF,KAAK,GAAG,CAJnB;QAKI,OAAO,EAAE;iBAAYvB,WAAW,CAACuB,KAAK,GAAG,CAAT,CAAvB;;QAVjB,EAYKA,KAAK,KAAK,CAAV,GAAc,QAAd,aAA4BA,KAAK,GAAG,CAApC,WAZL;;GAFE,CADV,CAZR,CADJ;;;;;"}